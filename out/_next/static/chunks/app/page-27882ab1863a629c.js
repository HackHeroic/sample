(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4422:function(e,t,r){Promise.resolve().then(r.bind(r,7139))},7139:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),o=r(2265),s=r(4033),a=r(220);function c(){let e=(0,s.useRouter)(),{user:t,isLoading:r}=(0,a.useAuth)();return(0,o.useEffect)(()=>{r||(t?e.push("/dashboard"):e.push("/login"))},[t,r,e]),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("p",{children:"Loading..."})})}},220:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return u},useAuth:function(){return i}});var n=r(7437),o=r(2265),s=r(4033),a=r(164);let c=(0,o.createContext)(void 0),u=e=>{let{children:t}=e,[r,u]=(0,o.useState)(null),[i,l]=(0,o.useState)(!0),f=(0,s.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{u(JSON.parse(t))}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}l(!1)},[]);let h=async(e,t)=>{try{let r=await (0,a.x4)({email:e,password:t});return localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),u(r.user),f.push("/dashboard"),{status:!0,user:r.user}}catch(e){throw e}},d=async e=>{try{let t=await (0,a.u9)(e);return localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),u(t.user),f.push("/dashboard"),!0}catch(e){throw e}};return(0,n.jsx)(c.Provider,{value:{user:r,login:h,googleLogin:d,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),u(null),f.push("/login")},isLoading:i,hasPermission:e=>!!r&&(r.permissions.includes("all_permissions")||r.permissions.includes(e))},children:t})},i=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},164:function(e,t,r){"use strict";r.d(t,{J$:function(){return g},Nq:function(){return l},Rd:function(){return m},fA:function(){return d},g1:function(){return w},h8:function(){return f},kY:function(){return S},qg:function(){return p},r4:function(){return i},u9:function(){return c},uh:function(){return u},ul:function(){return y},vd:function(){return h},x4:function(){return a}});let n="http://localhost:4000",o=()=>{let e=localStorage.getItem("token");return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}},s=async e=>{if(!e.ok){let t=await e.json().catch(()=>({message:"An error occurred"}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return 204===e.status?null:e.json()},a=async e=>{let t=await fetch("".concat(n,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return s(t)},c=async e=>{let t=await fetch("".concat(n,"/users/google-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:e})});return s(t)},u=async()=>{let e=await fetch("".concat(n,"/users"),{headers:o()});return s(e)},i=async e=>{let t=await fetch("".concat(n,"/users"),{method:"POST",headers:o(),body:JSON.stringify(e)});return s(t)},l=async(e,t)=>{let r=await fetch("".concat(n,"/users/").concat(e),{method:"PUT",headers:o(),body:JSON.stringify(t)});return s(r)},f=async e=>{let t=await fetch("".concat(n,"/users/").concat(e),{method:"DELETE",headers:o()});return s(t)},h=async()=>{let e=await fetch("".concat(n,"/roles"),{headers:o()});return s(e)},d=async e=>{let t=await fetch("".concat(n,"/roles"),{method:"POST",headers:o(),body:JSON.stringify(e)});return s(t)},y=async(e,t)=>{let r=await fetch("".concat(n,"/roles/").concat(e),{method:"PUT",headers:o(),body:JSON.stringify(t)});return s(r)},m=async e=>{let t=await fetch("".concat(n,"/roles/").concat(e),{method:"DELETE",headers:o()});return s(t)},p=async()=>{let e=await fetch("".concat(n,"/permissions"),{headers:o()}),t=await s(e);return t.map(e=>e.name)},g=async e=>{let t=await fetch("".concat(n,"/permissions"),{method:"POST",headers:o(),body:JSON.stringify(e)});return s(t)},S=async(e,t)=>{let r=await fetch("".concat(n,"/permissions/").concat(e),{method:"PUT",headers:o(),body:JSON.stringify(t)});return s(r)},w=async e=>{let t=await fetch("".concat(n,"/permissions/").concat(e),{method:"DELETE",headers:o()});return s(t)}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,r){var n,s={},i=null,l=null;for(n in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,n)&&!u.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:o,type:e,key:i,ref:l,props:s,_owner:c.current}}t.Fragment=s,t.jsx=i,t.jsxs=i},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(290)}},function(e){e.O(0,[971,864,744],function(){return e(e.s=4422)}),_N_E=e.O()}]);