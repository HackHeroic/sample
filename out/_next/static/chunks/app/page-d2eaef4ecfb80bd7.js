(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2601:function(t,e,r){"use strict";var n,o;t.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(8960)},6285:function(t,e,r){Promise.resolve().then(r.bind(r,7139))},7139:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u}});var n=r(7437),o=r(2265),s=r(4033),c=r(220);function u(){let t=(0,s.useRouter)(),{user:e,isLoading:r}=(0,c.useAuth)();return(0,o.useEffect)(()=>{r||(e?t.push("/dashboard"):t.push("/login"))},[e,r,t]),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("p",{children:"Loading..."})})}},220:function(t,e,r){"use strict";r.r(e),r.d(e,{AuthProvider:function(){return a},useAuth:function(){return i}});var n=r(7437),o=r(2265),s=r(4033),c=r(164);let u=(0,o.createContext)(void 0),a=t=>{let{children:e}=t,[r,a]=(0,o.useState)(null),[i,l]=(0,o.useState)(!0),f=(0,s.useRouter)();(0,o.useEffect)(()=>{let t=localStorage.getItem("token"),e=localStorage.getItem("user");if(t&&e)try{a(JSON.parse(e))}catch(t){localStorage.removeItem("token"),localStorage.removeItem("user")}l(!1)},[]);let h=async(t,e)=>{try{let r=await (0,c.x4)({email:t,password:e});return localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),a(r.user),f.push("/dashboard"),{status:!0,user:r.user}}catch(t){throw t}},d=async t=>{try{let e=await (0,c.u9)(t);return localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),a(e.user),f.push("/dashboard"),!0}catch(t){throw t}};return(0,n.jsx)(u.Provider,{value:{user:r,login:h,googleLogin:d,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),f.push("/login")},isLoading:i,hasPermission:t=>!!r&&(r.permissions.includes("all_permissions")||r.permissions.includes(t))},children:e})},i=()=>{let t=(0,o.useContext)(u);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},164:function(t,e,r){"use strict";r.d(e,{J$:function(){return v},Nq:function(){return f},Rd:function(){return p},fA:function(){return y},g1:function(){return T},h8:function(){return h},kY:function(){return w},qg:function(){return g},r4:function(){return l},u9:function(){return a},uh:function(){return i},ul:function(){return m},vd:function(){return d},x4:function(){return u}});var n=r(2601);let o=n.env.NEXT_PUBLIC_API_URL||"http://localhost:4000",s=()=>{let t=localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:"Bearer ".concat(t)}}},c=async t=>{if(!t.ok){let e=await t.json().catch(()=>({message:"An error occurred"}));throw Error(e.message||"HTTP error! status: ".concat(t.status))}return 204===t.status?null:t.json()},u=async t=>{let e=await fetch("".concat(o,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return c(e)},a=async t=>{let e=await fetch("".concat(o,"/users/google-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:t})});return c(e)},i=async()=>{let t=await fetch("".concat(o,"/users"),{headers:s()});return c(t)},l=async t=>{let e=await fetch("".concat(o,"/users"),{method:"POST",headers:s(),body:JSON.stringify(t)});return c(e)},f=async(t,e)=>{let r=await fetch("".concat(o,"/users/").concat(t),{method:"PUT",headers:s(),body:JSON.stringify(e)});return c(r)},h=async t=>{let e=await fetch("".concat(o,"/users/").concat(t),{method:"DELETE",headers:s()});return c(e)},d=async()=>{let t=await fetch("".concat(o,"/roles"),{headers:s()});return c(t)},y=async t=>{let e=await fetch("".concat(o,"/roles"),{method:"POST",headers:s(),body:JSON.stringify(t)});return c(e)},m=async(t,e)=>{let r=await fetch("".concat(o,"/roles/").concat(t),{method:"PUT",headers:s(),body:JSON.stringify(e)});return c(r)},p=async t=>{let e=await fetch("".concat(o,"/roles/").concat(t),{method:"DELETE",headers:s()});return c(e)},g=async()=>{let t=await fetch("".concat(o,"/permissions"),{headers:s()}),e=await c(t);return e.map(t=>t.name)},v=async t=>{let e=await fetch("".concat(o,"/permissions"),{method:"POST",headers:s(),body:JSON.stringify(t)});return c(e)},w=async(t,e)=>{let r=await fetch("".concat(o,"/permissions/").concat(t),{method:"PUT",headers:s(),body:JSON.stringify(e)});return c(r)},T=async t=>{let e=await fetch("".concat(o,"/permissions/").concat(t),{method:"DELETE",headers:s()});return c(e)}},8960:function(t){!function(){var e={229:function(t){var e,r,n,o=t.exports={};function s(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s}catch(t){e=s}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(t){r=c}}();var a=[],i=!1,l=-1;function f(){i&&n&&(i=!1,n.length?a=n.concat(a):l=-1,a.length&&h())}function h(){if(!i){var t=u(f);i=!0;for(var e=a.length;e;){for(n=a,a=[];++l<e;)n&&n[l].run();l=-1,e=a.length}n=null,i=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];a.push(new d(t,e)),1!==a.length||i||u(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var s=r[t]={exports:{}},c=!0;try{e[t](s,s.exports,n),c=!1}finally{c&&delete r[t]}return s.exports}n.ab="//";var o=n(229);t.exports=o}()},622:function(t,e,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(t,e,r){var n,s={},i=null,l=null;for(n in void 0!==r&&(i=""+r),void 0!==e.key&&(i=""+e.key),void 0!==e.ref&&(l=e.ref),e)c.call(e,n)&&!a.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===s[n]&&(s[n]=e[n]);return{$$typeof:o,type:t,key:i,ref:l,props:s,_owner:u.current}}e.Fragment=s,e.jsx=i,e.jsxs=i},7437:function(t,e,r){"use strict";t.exports=r(622)},4033:function(t,e,r){t.exports=r(290)}},function(t){t.O(0,[971,864,744],function(){return t(t.s=6285)}),_N_E=t.O()}]);